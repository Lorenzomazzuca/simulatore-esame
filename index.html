<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Simulatore Esame</title>
<style>
body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #1e3c72, #2a5298);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
}

.card {
    background: white;
    width: 600px;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.2);
}

h2 {
    margin-bottom: 20px;
}

button {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border: none;
    border-radius: 8px;
    font-size: 15px;
    cursor: pointer;
    transition: 0.2s;
}

button:hover {
    transform: scale(1.02);
}

.correct { background: #4CAF50; color: white; }
.wrong { background: #f44336; color: white; }

.progress {
    height: 10px;
    background: #ddd;
    border-radius: 5px;
    margin-bottom: 20px;
}

.progress-bar {
    height: 10px;
    background: #2a5298;
    border-radius: 5px;
    width: 0%;
}

.score {
    margin-top: 10px;
    font-weight: bold;
}
</style>
</head>
<body>

<div class="card">
<div class="progress"><div class="progress-bar" id="progressBar"></div></div>
<h2 id="question"></h2>
<div id="answers"></div>
<p id="feedback"></p>
<div class="score" id="score"></div>
</div>

<script>

const quiz = [
{
question: "Come funzionano gli ETF?",
answers: [
"Gestione attiva",
"Replicano un indice",
"Non quotati",
"Solo istituzionali"
],
correct: 1
},
{
question: "Cos'Ã¨ una put?",
answers: [
"Diritto di acquistare",
"Diritto di vendere",
"Obbligo di vendere",
"Contratto forward"
],
correct: 1
},
{
question: "Anno modello Black & Scholes?",
answers: ["1963","1973","1983","1993"],
correct: 1
},
{
question: "Nel CAPM il premio per il rischio Ã¨:",
answers: [
"Rf - Rm",
"Rm - Rf",
"Beta Ã— Rf",
"Solo Beta"
],
correct: 1
},
{
question: "Uno zero coupon bond:",
answers: [
"Paga cedole",
"Ha prezzo fisso",
"Non paga cedole",
"Ãˆ perpetuo"
],
correct: 2
}
];

let shuffled = quiz.sort(() => 0.5 - Math.random());
let current = 0;
let score = 0;

function loadQuestion() {
updateProgress();

let q = shuffled[current];
document.getElementById("question").innerText = q.question;
document.getElementById("feedback").innerText = "";
document.getElementById("score").innerText = "Punteggio: " + score;

let answersDiv = document.getElementById("answers");
answersDiv.innerHTML = "";

q.answers.forEach((answer, index) => {
let btn = document.createElement("button");
btn.innerText = answer;
btn.onclick = () => checkAnswer(index);
answersDiv.appendChild(btn);
});
}

function checkAnswer(index) {
let correct = shuffled[current].correct;
let buttons = document.querySelectorAll("#answers button");

buttons.forEach((btn, i) => {
if(i === correct) btn.classList.add("correct");
if(i === index && i !== correct) btn.classList.add("wrong");
btn.disabled = true;
});

if(index === correct) score++;

setTimeout(() => {
current++;
if(current < shuffled.length) {
loadQuestion();
} else {
document.querySelector(".card").innerHTML =
"<h2>Test completato ðŸŽ‰</h2>" +
"<p>Punteggio finale: <b>" + score + " / " + shuffled.length + "</b></p>";
}
}, 1000);
}

function updateProgress() {
let percent = (current / shuffled.length) * 100;
document.getElementById("progressBar").style.width = percent + "%";
}

loadQuestion();

</script>
</body>
</html>
